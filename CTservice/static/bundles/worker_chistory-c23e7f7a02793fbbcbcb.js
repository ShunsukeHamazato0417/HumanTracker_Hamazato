/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/js/worker_chistory.js":
/*!**************************************!*\
  !*** ./assets/js/worker_chistory.js ***!
  \**************************************/
/***/ (() => {

eval("\n\n\nconsole.log('WebWorker activate.');\n\nlet send_data;\nlet displaying;\nlet displaying_view;\nlet start = false;\nvar ws_req;\nvar now, data_t, lag;\n\n\nlet domain = 'ws://192.168.50.12:';\nlet port = '8082';\nlet ws_server;\nlet ws;\nlet ws_max_reconnect = 10;\nlet ws_try_reconnect = 0;\nlet ws_try_interval  = 0;\nlet interval = 1;\nlet ty;\n\nself.addEventListener('message', (req) => {\n  if (req.data.ty){\n    ty = req.data.ty;\n    ws_req = { \n\tty       : ty,\n        interval : interval \n    }\n    ws_server = domain + port;\n    ws_connect();\n  } else if (req.data.command){\n    if (req.data.command=='reconnect'){\n      ws.close();\n    } else if (req.data.command=='Forced reconnect'){\n      interval++;\n      ws_req = { ty : ty,\n                 interval : interval }\n      console.log(interval);\n      ws.close();\n    }\n  }\n});\n\n//console.log(location.href)\n\n/* ----- functions ----- */\nvar pre = new Date();\nvar fps;\n\nfunction ws_connect(){\n  ws = new WebSocket(ws_server);\n \n  ws.onopen = function(){\n    ws_try_reconnect = 0;\n    ws_try_interval  = 0;\n    ws.send(JSON.stringify(ws_req));\n    console.log(ws_req);\n    console.log('Connected to WebSocket server: ' + ws_server);\n  };\n  ws.onmessage = function(msg){\n    //var start = new Date();\n    // console.log(msg.data);\n    var json = JSON.parse(msg.data);\n    // console.log(json);\n    send_data = transformShareCordinate(json);\n    //var end = new Date();\n    //var tj = end.getTime() - start.getTime(); \n    //console.log('trans: ' + tj);\n    self.postMessage(send_data);\n    //var end2 = new Date();\n    //tj = end2.getTime() - end.getTime();\n    //console.log('send: ' + tj);\n\n    /*now = new Date();\n    data_t = to_date(send_data[1].time);\n    lag = now.getTime() - data_t.getTime();\n    console.log('lag: ' + lag);\n    fps = 1000 / (now.getTime() - pre.getTime());\n    console.log('fps: ' + fps);\n    pre = now;*/\n  };\n  ws.onclose = function incoming(event){\n    ws_try_reconnect++;\n    ws_try_interval++;\n    if (ws_try_reconnect <= 1){\n      console.log('Failed connecting to WebSocket server: ' + ws_server);\n    } else if (ws_try_reconnect >= ws_max_reconnect){\n      console.log('WebSocket server is down.');\n      return;\n    }\n    sleep(ws_try_interval);\n    console.log('Try Reconnecting: ' + ws_try_reconnect);\n    //console.log('ws close.event',event);\n    //console.log('ws.readyState',ws.readyState);\n    ws_connect();\n  };\n}\n\n\n/*function sendToMain(){\n  if (send_data!=null){\n    self.postMessage(send_data);\n  }\n}\nsetInterval(sendToMain, 1000/20);*/\n\n\nfunction sleep(a){\n  var dt1 = new Date().getTime();\n  var dt2 = new Date().getTime();\n  while (dt2 < dt1 + a*1000){\n    dt2 = new Date().getTime();\n  }\n  return;\n}\n\n\nfunction transformShareCordinate(json){\n\n  var send = [];\n\n  // var data_tmp = [];\n  var data_history = [];\n  // send.push(json);\n  for (var i=0; i<json.chistory.length; i++){\n    // if(json[i]){\n    var data_tmp = [];\n    for (var j=0; j<json.chistory[i].history.length; j++){\n      var tmp = [0,0,0];\n      tmp[0] = json.chistory[i].history[j].xy[0] + 27380;\n      tmp[1] = json.chistory[i].history[j].xy[1] + 3560;\n      tmp[2] = json.chistory[i].id;\n      data_tmp.push(tmp);\n    }\n    data_history.push(data_tmp);\n    // var sensor_tmp = {\n    //   \"det_time\"  : json.time,\n    //   \"data\"      : data_tmp\n    // }\n    // send.push(sensor_tmp);\n    // console.log(send);\n    // }\n  }\n  var sensor_tmp = {\n    \"det_time\"  : json.time,\n    \"data\"      : data_history\n  }\n  console.log(sensor_tmp);\n  // send.push(sensor_tmp);\n  // console.log(send);\n \n  return sensor_tmp;\n}\n\n\nfunction to_date (time){\n\n  var year = time.year;\n  var mon  = time.mon;\n  var day  = time.day;\n  var hour = time.hour;\n  var min  = time.min;\n  var sec  = time.sec;\n  var mil  = time.misec;\n\n  var t_result = new Date(year, mon-1, day, hour, min, sec, mil);\n  return t_result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvd29ya2VyX2NoaXN0b3J5LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFZOzs7QUFHWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDOzs7QUFHakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdCQUF3QjtBQUN4QztBQUNBO0FBQ0Esa0JBQWtCLG1DQUFtQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQ1RzZXJ2aWNlLy4vYXNzZXRzL2pzL3dvcmtlcl9jaGlzdG9yeS5qcz8yMzE3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5cbmNvbnNvbGUubG9nKCdXZWJXb3JrZXIgYWN0aXZhdGUuJyk7XG5cbmxldCBzZW5kX2RhdGE7XG5sZXQgZGlzcGxheWluZztcbmxldCBkaXNwbGF5aW5nX3ZpZXc7XG5sZXQgc3RhcnQgPSBmYWxzZTtcbnZhciB3c19yZXE7XG52YXIgbm93LCBkYXRhX3QsIGxhZztcblxuXG5sZXQgZG9tYWluID0gJ3dzOi8vMTkyLjE2OC41MC4xMjonO1xubGV0IHBvcnQgPSAnODA4Mic7XG5sZXQgd3Nfc2VydmVyO1xubGV0IHdzO1xubGV0IHdzX21heF9yZWNvbm5lY3QgPSAxMDtcbmxldCB3c190cnlfcmVjb25uZWN0ID0gMDtcbmxldCB3c190cnlfaW50ZXJ2YWwgID0gMDtcbmxldCBpbnRlcnZhbCA9IDE7XG5sZXQgdHk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChyZXEpID0+IHtcbiAgaWYgKHJlcS5kYXRhLnR5KXtcbiAgICB0eSA9IHJlcS5kYXRhLnR5O1xuICAgIHdzX3JlcSA9IHsgXG5cdHR5ICAgICAgIDogdHksXG4gICAgICAgIGludGVydmFsIDogaW50ZXJ2YWwgXG4gICAgfVxuICAgIHdzX3NlcnZlciA9IGRvbWFpbiArIHBvcnQ7XG4gICAgd3NfY29ubmVjdCgpO1xuICB9IGVsc2UgaWYgKHJlcS5kYXRhLmNvbW1hbmQpe1xuICAgIGlmIChyZXEuZGF0YS5jb21tYW5kPT0ncmVjb25uZWN0Jyl7XG4gICAgICB3cy5jbG9zZSgpO1xuICAgIH0gZWxzZSBpZiAocmVxLmRhdGEuY29tbWFuZD09J0ZvcmNlZCByZWNvbm5lY3QnKXtcbiAgICAgIGludGVydmFsKys7XG4gICAgICB3c19yZXEgPSB7IHR5IDogdHksXG4gICAgICAgICAgICAgICAgIGludGVydmFsIDogaW50ZXJ2YWwgfVxuICAgICAgY29uc29sZS5sb2coaW50ZXJ2YWwpO1xuICAgICAgd3MuY2xvc2UoKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vL2NvbnNvbGUubG9nKGxvY2F0aW9uLmhyZWYpXG5cbi8qIC0tLS0tIGZ1bmN0aW9ucyAtLS0tLSAqL1xudmFyIHByZSA9IG5ldyBEYXRlKCk7XG52YXIgZnBzO1xuXG5mdW5jdGlvbiB3c19jb25uZWN0KCl7XG4gIHdzID0gbmV3IFdlYlNvY2tldCh3c19zZXJ2ZXIpO1xuIFxuICB3cy5vbm9wZW4gPSBmdW5jdGlvbigpe1xuICAgIHdzX3RyeV9yZWNvbm5lY3QgPSAwO1xuICAgIHdzX3RyeV9pbnRlcnZhbCAgPSAwO1xuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkod3NfcmVxKSk7XG4gICAgY29uc29sZS5sb2cod3NfcmVxKTtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIFdlYlNvY2tldCBzZXJ2ZXI6ICcgKyB3c19zZXJ2ZXIpO1xuICB9O1xuICB3cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihtc2cpe1xuICAgIC8vdmFyIHN0YXJ0ID0gbmV3IERhdGUoKTtcbiAgICAvLyBjb25zb2xlLmxvZyhtc2cuZGF0YSk7XG4gICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKG1zZy5kYXRhKTtcbiAgICAvLyBjb25zb2xlLmxvZyhqc29uKTtcbiAgICBzZW5kX2RhdGEgPSB0cmFuc2Zvcm1TaGFyZUNvcmRpbmF0ZShqc29uKTtcbiAgICAvL3ZhciBlbmQgPSBuZXcgRGF0ZSgpO1xuICAgIC8vdmFyIHRqID0gZW5kLmdldFRpbWUoKSAtIHN0YXJ0LmdldFRpbWUoKTsgXG4gICAgLy9jb25zb2xlLmxvZygndHJhbnM6ICcgKyB0aik7XG4gICAgc2VsZi5wb3N0TWVzc2FnZShzZW5kX2RhdGEpO1xuICAgIC8vdmFyIGVuZDIgPSBuZXcgRGF0ZSgpO1xuICAgIC8vdGogPSBlbmQyLmdldFRpbWUoKSAtIGVuZC5nZXRUaW1lKCk7XG4gICAgLy9jb25zb2xlLmxvZygnc2VuZDogJyArIHRqKTtcblxuICAgIC8qbm93ID0gbmV3IERhdGUoKTtcbiAgICBkYXRhX3QgPSB0b19kYXRlKHNlbmRfZGF0YVsxXS50aW1lKTtcbiAgICBsYWcgPSBub3cuZ2V0VGltZSgpIC0gZGF0YV90LmdldFRpbWUoKTtcbiAgICBjb25zb2xlLmxvZygnbGFnOiAnICsgbGFnKTtcbiAgICBmcHMgPSAxMDAwIC8gKG5vdy5nZXRUaW1lKCkgLSBwcmUuZ2V0VGltZSgpKTtcbiAgICBjb25zb2xlLmxvZygnZnBzOiAnICsgZnBzKTtcbiAgICBwcmUgPSBub3c7Ki9cbiAgfTtcbiAgd3Mub25jbG9zZSA9IGZ1bmN0aW9uIGluY29taW5nKGV2ZW50KXtcbiAgICB3c190cnlfcmVjb25uZWN0Kys7XG4gICAgd3NfdHJ5X2ludGVydmFsKys7XG4gICAgaWYgKHdzX3RyeV9yZWNvbm5lY3QgPD0gMSl7XG4gICAgICBjb25zb2xlLmxvZygnRmFpbGVkIGNvbm5lY3RpbmcgdG8gV2ViU29ja2V0IHNlcnZlcjogJyArIHdzX3NlcnZlcik7XG4gICAgfSBlbHNlIGlmICh3c190cnlfcmVjb25uZWN0ID49IHdzX21heF9yZWNvbm5lY3Qpe1xuICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBzZXJ2ZXIgaXMgZG93bi4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2xlZXAod3NfdHJ5X2ludGVydmFsKTtcbiAgICBjb25zb2xlLmxvZygnVHJ5IFJlY29ubmVjdGluZzogJyArIHdzX3RyeV9yZWNvbm5lY3QpO1xuICAgIC8vY29uc29sZS5sb2coJ3dzIGNsb3NlLmV2ZW50JyxldmVudCk7XG4gICAgLy9jb25zb2xlLmxvZygnd3MucmVhZHlTdGF0ZScsd3MucmVhZHlTdGF0ZSk7XG4gICAgd3NfY29ubmVjdCgpO1xuICB9O1xufVxuXG5cbi8qZnVuY3Rpb24gc2VuZFRvTWFpbigpe1xuICBpZiAoc2VuZF9kYXRhIT1udWxsKXtcbiAgICBzZWxmLnBvc3RNZXNzYWdlKHNlbmRfZGF0YSk7XG4gIH1cbn1cbnNldEludGVydmFsKHNlbmRUb01haW4sIDEwMDAvMjApOyovXG5cblxuZnVuY3Rpb24gc2xlZXAoYSl7XG4gIHZhciBkdDEgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgdmFyIGR0MiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB3aGlsZSAoZHQyIDwgZHQxICsgYSoxMDAwKXtcbiAgICBkdDIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfVxuICByZXR1cm47XG59XG5cblxuZnVuY3Rpb24gdHJhbnNmb3JtU2hhcmVDb3JkaW5hdGUoanNvbil7XG5cbiAgdmFyIHNlbmQgPSBbXTtcblxuICAvLyB2YXIgZGF0YV90bXAgPSBbXTtcbiAgdmFyIGRhdGFfaGlzdG9yeSA9IFtdO1xuICAvLyBzZW5kLnB1c2goanNvbik7XG4gIGZvciAodmFyIGk9MDsgaTxqc29uLmNoaXN0b3J5Lmxlbmd0aDsgaSsrKXtcbiAgICAvLyBpZihqc29uW2ldKXtcbiAgICB2YXIgZGF0YV90bXAgPSBbXTtcbiAgICBmb3IgKHZhciBqPTA7IGo8anNvbi5jaGlzdG9yeVtpXS5oaXN0b3J5Lmxlbmd0aDsgaisrKXtcbiAgICAgIHZhciB0bXAgPSBbMCwwLDBdO1xuICAgICAgdG1wWzBdID0ganNvbi5jaGlzdG9yeVtpXS5oaXN0b3J5W2pdLnh5WzBdICsgMjczODA7XG4gICAgICB0bXBbMV0gPSBqc29uLmNoaXN0b3J5W2ldLmhpc3Rvcnlbal0ueHlbMV0gKyAzNTYwO1xuICAgICAgdG1wWzJdID0ganNvbi5jaGlzdG9yeVtpXS5pZDtcbiAgICAgIGRhdGFfdG1wLnB1c2godG1wKTtcbiAgICB9XG4gICAgZGF0YV9oaXN0b3J5LnB1c2goZGF0YV90bXApO1xuICAgIC8vIHZhciBzZW5zb3JfdG1wID0ge1xuICAgIC8vICAgXCJkZXRfdGltZVwiICA6IGpzb24udGltZSxcbiAgICAvLyAgIFwiZGF0YVwiICAgICAgOiBkYXRhX3RtcFxuICAgIC8vIH1cbiAgICAvLyBzZW5kLnB1c2goc2Vuc29yX3RtcCk7XG4gICAgLy8gY29uc29sZS5sb2coc2VuZCk7XG4gICAgLy8gfVxuICB9XG4gIHZhciBzZW5zb3JfdG1wID0ge1xuICAgIFwiZGV0X3RpbWVcIiAgOiBqc29uLnRpbWUsXG4gICAgXCJkYXRhXCIgICAgICA6IGRhdGFfaGlzdG9yeVxuICB9XG4gIGNvbnNvbGUubG9nKHNlbnNvcl90bXApO1xuICAvLyBzZW5kLnB1c2goc2Vuc29yX3RtcCk7XG4gIC8vIGNvbnNvbGUubG9nKHNlbmQpO1xuIFxuICByZXR1cm4gc2Vuc29yX3RtcDtcbn1cblxuXG5mdW5jdGlvbiB0b19kYXRlICh0aW1lKXtcblxuICB2YXIgeWVhciA9IHRpbWUueWVhcjtcbiAgdmFyIG1vbiAgPSB0aW1lLm1vbjtcbiAgdmFyIGRheSAgPSB0aW1lLmRheTtcbiAgdmFyIGhvdXIgPSB0aW1lLmhvdXI7XG4gIHZhciBtaW4gID0gdGltZS5taW47XG4gIHZhciBzZWMgID0gdGltZS5zZWM7XG4gIHZhciBtaWwgID0gdGltZS5taXNlYztcblxuICB2YXIgdF9yZXN1bHQgPSBuZXcgRGF0ZSh5ZWFyLCBtb24tMSwgZGF5LCBob3VyLCBtaW4sIHNlYywgbWlsKTtcbiAgcmV0dXJuIHRfcmVzdWx0O1xufVxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/js/worker_chistory.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./assets/js/worker_chistory.js"]();
/******/ 	
/******/ })()
;